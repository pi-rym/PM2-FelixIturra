document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("movieForm"),r=document.getElementById("selectedGenres"),t=document.querySelectorAll('input[name="genre"]');document.querySelector('button[type="reset"]').addEventListener("click",(function(){e.reset(),r.value=""})),e.addEventListener("submit",(async function(r){r.preventDefault();const o=new FormData(e),n=Object.fromEntries(o.entries()),a=["title","year","director","duration","rate","poster"].every((function(e){return""!==n[e].trim()&&function(e,r){switch(e){case"title":case"director":case"duration":case"poster":return"string"==typeof r;case"year":case"rate":return!isNaN(r)&&"boolean"!=typeof r&&""!==r;default:return!0}}(e,n[e])})),c=Array.from(t).filter((function(e){return e.checked})).map((function(e){return e.value}));if(a&&0!==c.length){if(confirm("¿Estás seguro de enviar el formulario?"))try{const r=await axios.post("/peliculas",n);console.log("Película creada:",r.data),alert("Película creada exitosamente."),e.reset()}catch(e){console.error("Error al crear película:",e),e.response&&e.response.data&&e.response.data.message?alert("Error al crear película: "+e.response.data.message):e.request?alert("Error de red: No se pudo conectar al servidor."):alert("Error al crear película: Por favor, inténtalo de nuevo.")}}else alert("Por favor, completa todos los campos del formulario y selecciona al menos un género.")})),t.forEach((function(e){e.addEventListener("change",(function(){const e=Array.from(t).filter((function(e){return e.checked})).map((function(e){return e.value}));r.value=e.join(", "),console.log("Géneros seleccionados:",e)}))}))}));